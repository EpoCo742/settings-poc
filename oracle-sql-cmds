CREATE TABLE Groups (
    GroupId NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    GroupName VARCHAR2(255)
);

CREATE TABLE GroupSettings (
    GroupId NUMBER NOT NULL,
    SettingKey VARCHAR2(255) NOT NULL,
    SettingValue CLOB NOT NULL,
    ValueType VARCHAR2(50) NOT NULL,
    CreatedBy NUMBER NOT NULL,
    CreatedDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    LastUpdatedDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    PRIMARY KEY (GroupId, SettingKey),
    CONSTRAINT FK_GroupSettings_Group FOREIGN KEY (GroupId) REFERENCES Groups(GroupId)
);

CREATE TABLE GroupSettingsAudit (
    AuditId NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    GroupId NUMBER NOT NULL,
    SettingKey VARCHAR2(255),
    OldValue CLOB,
    NewValue CLOB,
    ChangedBy NUMBER NOT NULL,
    ChangedDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT FK_GroupSettingsAudit_Group FOREIGN KEY (GroupId) REFERENCES Groups(GroupId)
);
